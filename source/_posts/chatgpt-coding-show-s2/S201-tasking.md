***恢复更新，前一阵儿实在太忙了，四处去讲。也许诺了听众。我后面会在这儿更新，结果一直没更新，非常对不起。最近算是又有一些新的心得吧，继续在这儿更新下来。可能有些线下的听众已经听过了，但是这里我会把它展开的更细一些。讲的更深一些。***

我们上一季主要讲的都是怎么用它来写代码，那么我们这一季呢就开始关注于写代码之外的东西。当然也会写代码，但是写代码的目的是为了更加自动化的去完成一些事情，包括写代码:P。

那么第一篇，我们就先把目光放到写代码之前的一步：任务分解。很多听过我线下讲解的人。都瞬间明白了一件事：在这个新的时代，如何能够把开发任务拆解到chatgpt就一定能够驾驭的这个范畴，变成了一个新的开发者个人竞争力的关键点。 其实呢，在我眼中看来，这不是一个新的个人竞争力关键点，一直都是很重要的关键点，不过不重要了，更多人意识到就是好事。

那么在这一篇，我们可以深想一步：这一步ChatGPT不能做吗？答案是能，但必须是GPT4。GPT3.5也不是不行，就是表现略差，而4则会有质的不同。

## 怎么做

我们来试一下，首先我们找了一个场景：

![app-architecture](https://jtong-pic.obs.cn-north-4.myhuaweicloud.com/chatgpt-coding-show/09-chatgpt-coding-show-s2/01-tasking/S201-01-app-architecture.png)

这个场景里面描述的是我要做一个软件，通过文字简单描述了这个软件的架构：
  - 我们第一段给出的是所谓的架构的静态视图
  - 第二段给出的是一些约束，是在动态视图的维度描述的。

可以看出，我们这个需求其实有点儿绕的。这个需求呢是我们以前培训毕业生的一个项目需求。可以看出我们加了一个很绕的要求就是：提交以后不能改。于是你要把草稿存在BFF这个需求呢，对于毕业生来说其实是一个很容易掉进去的陷阱。因为大家习惯了从数据库里面查询做分页等等，那么突然之间我给了你两个数据源，还让你放在一个列表里，很多人一开始都被绕进去了。

然后在下面，我又加上了一些任务模版，这些可以看做是架构的开发视图：

![tasking-template](https://jtong-pic.obs.cn-north-4.myhuaweicloud.com/chatgpt-coding-show/09-chatgpt-coding-show-s2/01-tasking/S201-02-tasking-template.png)

然后我们再加入需求，这就是我们完整的prompt了：

![requirement](https://jtong-pic.obs.cn-north-4.myhuaweicloud.com/chatgpt-coding-show/09-chatgpt-coding-show-s2/01-tasking/S201-03-requirement.png)


点击提交（注意：这几张图是一个prompt，他们要合并在一起一块提交），可以看到我们得到了任务列表：

![tasking-result](https://jtong-pic.obs.cn-north-4.myhuaweicloud.com/chatgpt-coding-show/09-chatgpt-coding-show-s2/01-tasking/S201-04-tasking-result.png)


然后配上我们的技术要求，我们就可以开始写代码了。不过具体做起来可没有那么简单。
下面是一个具体的例子：

![task-to-code](https://jtong-pic.obs.cn-north-4.myhuaweicloud.com/chatgpt-coding-show/09-chatgpt-coding-show-s2/01-tasking/S201-05-task-to-code.png)

可以看到我们把上下文又给他讲了一遍，而且，我们还给出了更详尽的技术架构的上下文（这里仅仅是简单示意，真实使用的时候这样写是远远不够的）。

然后告诉他具体的任务，并且要一次性给出前后任务，再让他去执行特定的一步。
做到这个程度，我们才能得到下面的代码：

![code-response](https://jtong-pic.obs.cn-north-4.myhuaweicloud.com/chatgpt-coding-show/09-chatgpt-coding-show-s2/01-tasking/S201-06-code-response.png)


可以看到对于chatgbt来说，你可以执行任务列表里的任何一步。并不需要一次性把每一步都做完。

然后看看缺点，给出的代码其实也并不是特别令我满意，因为我可能会希望他使用的MyBatis的Mapper而不是Spring的Repository，再就是也没有给出建表语句。从这儿可以看出来，如果想让他完成一个特定的任务的话，我们还是需要对这些任务的做法进行更细节的定义。这个定义呢？我们称之为工序。而工序不是我们这一节的重点，我们就不展开了。这里有一篇简单描述：[开发工序管理](https://jtong.dev/2020/07/20/something-about-software-development/developing-process-management/)，但是文章里也没有工序的具体实例。我们后面有机会可以找一个例子，用ChatGPT来演示一下具体实例怎么写。

## 为什么能做

我们回顾一下我们做的事情，我们在上面到底做了什么？揭秘一下魔法是如何发生的。
开始之前我们需要聊一下这个ChatGPT的里面到底有哪些东西是我们值得信任的。
下面这张图展示了ChatGPT的典型交互:

![chatgpt-simple-scenario-concept](https://jtong-pic.obs.cn-north-4.myhuaweicloud.com/chatgpt-coding-show/09-chatgpt-coding-show-s2/01-tasking/S201-07-chatgpt-simple-scenario-concept.png)

也就是我们给他一个提问，他给我一个回答。而在我下一次提问的时候，他会把之前的回答都发过去。如果我们打开它的网页控制台，我们就会发现它至少会发送上一次和这一次的提问和回答。这就是为什么他看起来有记忆的原因。其实对于ChatGPT来说，它是一个无状态的服务，它的记忆是靠这样把之前的提问和回答又发回去一遍的方式完成的。

我们打开中间的ChatGPT再看看:

![chatgpt-simple-scenario-inner-concept-refine](https://jtong-pic.obs.cn-north-4.myhuaweicloud.com/chatgpt-coding-show/09-chatgpt-coding-show-s2/01-tasking/S201-08-chatgpt-simple-scenario-inner-concept-refine.png)


虽然里面的图不是很严谨，但从应用的角度足以表意了。可以看出ChatGPT有海量的知识还有三大能力。很多人都知道ChatGPT知识只到2021年，所以很多人对于他能够胜任的工作范围有一个误判。

很多人会假设因为ChatGPT不具备2021年之后的知识。所以需要2021年之后的知识解决的问题，他都解决不了。

但其实换一个角度来想，抛掉知识来说，他的能力是不是不受时间的限制？他之所以能有现在这样经验的表现，就反而是证明了他的能力的强大。很多人都知道ChatGPT会编造知识，可能他给出的知识是不太可信的。但是他能有如此惊艳的表现，表明了他的能力相对来说是更可信的，而无论是在2021年还是在现在，能力都是通用的。即便它不具有2021年之后的知识，但是因为他具有很强的能力。是不是我告诉他一些知识？然后他就可以利用他的能力。把相关的工作来做好呢？从上面的表现来看，我们也可以看出，任务分解这件事情。就是充分利用了他的能力，而不是他的知识。

他的三大能力是什么呢？我将它总结为：
1. 从抽象到具象的能力。
2. 从具象到抽象的能力和思维能力。
3. 思维链的能力，我更喜欢叫他任务分解和执行的能力。

这三个能力是什么意思呢？我们一个一个讲，首先说从抽象到具象的能力。我们举一个例子来说明这个能力，比如我们知道软件设计中有一个原则叫做单一职责。那么这就是一个极为抽象的概念名词，对于一个外行来说，可能都不知道他什么意思，我可以让他更进一步的解释一下，什么叫做单一职责？这个解释比起这个概念名词本身，要具象了一点。但是这个解释可能还是太抽象了。我可能还是不懂，于是我可以让他举个例子。于是这个例子就有比这个解释更具象了一层。ChatGPT就具有这样从抽象到具象这样层层展开的能力。

那么什么是从具象到抽象的，当然就是把刚才的过程反过来。我有的时候会这么使用这个能力，比如说我拿到一个json数据。我跟他说你给我基于这个数据提取一个类。那么他可能就提取了一个类，然后把从从数据的表达上推测。哪一个数据的值大概都是什么类型？这一步就是从具象到抽象。完成这一步之后呢，我可能说你综合判断一下这个类有没有一个更好的名字，那么他就可以给我起个更好的类名。那么他就可以更进一步抽象。所以说ChatGPT具有一个从具象到抽象这样层层封装的能力。

那么什么是思维链的能力呢，简单的说就是你让他一步一步的去做一件事情，比如说解一道应用题。让他一步步做，就会比让他直接解决的应用题正确率要高。那么这种能力应用在工作中就是任务分解和执行，所以我管他叫任务分解和执行的能力。凭借这个能力他可以把一件事情分解成多步，这些步骤还是有序的，然后按照步骤去执行。恰好就可以把软件开发的问题逐步分解到了他可以处理的范畴。

那么在上面的任务分解中，我是如何用这三个能力解决问题的呢？下面这张图展示了其中的原理：

![tasking-how](https://jtong-pic.obs.cn-north-4.myhuaweicloud.com/chatgpt-coding-show/09-chatgpt-coding-show-s2/01-tasking/S201-09-tasking-how.png)

可以看到我们在最开始的时候给了他一个。核心框架的prompt，这个核心框架是思维框架的意思。就是让他按照这个框架去做事，这个框架包含了架构视图和架构约束。然后配上需求调用它。抽象到具象加任务分解的能力，我们就得到了任务。然后我们拿任务和具体的技术描述。放在一起再次调用它从抽象到具象的能力，还有任务执行的能力，我们就得到了代码。

## 总结

在本文中，我们讨论了如何利用ChatGPT在软件开发中实现任务分解。通过对一个具体场景的分析，我们发现ChatGPT具有从抽象到具象的能力、从具象到抽象的能力和任务分解与执行的能力，使其能够在软件开发过程中完成任务分解。通过将需求和架构模板分解为多个任务列表，我们可以利用ChatGPT的能力逐步完成软件开发。


## 延展聊聊

### 为什么说任务分解能力不是新的竞争力

我以前呢参与过企业里技术人员能力模型的相关工作，在我们分析的这个能力模型当中，我们假定把人才分为初中高三级。那么中级的这一批人，也就是中间这一批，在很多企业里被称之为senior dev，也就是所谓的高级开发人员。而高级的人可能就是技术负责人啊，架构师啊这些。那么中间这一批高级开发人员，你可以简单的想象一个群体，就是他差不多工作3~5年之后，就会进入到这个级别。

那么这个级别的人，我们通常会对他们有一些期望，首先就是他能解决很多难题，因为他非常有经验。那这个呢，从企业管理的角度来讲，是可遇不可求的，所以呢，也没有办法规划和培养。而且一个企业里说实话也不需要太多这种人，于是只能看其他方面。那么通常呢更看重的能力或者说看重的能力之一吧，就是他的这个任务分解能力。因为到了这个级别的人，他会面临一个很重要的职责，就是带领团队里面比较初级的人。去完成一些工作。他通常是团队里的压仓石。那么对于这批人，我们考察他的其中一个能力，就叫做分析性思考。

这个分析性思考就是指，他可以在脑子里把要做的这个事儿从头到尾的过一遍。然后分解成可执行的任务。可以自己做，也可以派给别人做，也可以监督别人做。所以这个能力一直都是我们看中高级开发人员的一种能力。

只是在ChatGPT的时代，我们可能会面临一个更普遍的需求，那就是普通程序员也要具备这个能力了，因为每个程序员都有个ChatGPT这样的AI要指挥，指挥好了可以极大的提升自己的效率。带来的另一个额外影响可能是，使得其实新入行就变难了。对于想要加入行业的新人来说不是一个好消息。

### 努力把不可言说的东西变成可以用语言表达的东西

我们可以看到，当我们刚找到我们的护城河，结果发现护城河似乎也不那么牢靠。大语言模型最可怕的地方就在于一旦你可以用语言描述一件你原本以为不可言说的过程，那么你就可以交由大语言模型去完成这个过程。

恰好软件开发这件事情对于我们这些研究方法学的人来说，就是努力把所谓不可言说的事情变得可以言说。比如觉得软件开发中分解任务有很多不可言说的东西。实际上呢，分解任务这件事情嗯，对于我们从事软件开发方法学研究和思考的人来说，并不是那么神秘的不可言说的东西，虽然很多人想把它归咎为神秘和不可言说。主要的问题是这个领域有些抽象。它的输入量有点多，信息的角度和维度会很多，所以呢我就算告诉你怎么做任务分解。对于不会做的人，听起来就像听天书一样，对于会做的人听起来就像废话一样。所以这是这一类知识以前的尴尬之所在。

这同时也造成了我之前写过的工序管理这个实践推广的尴尬之所在，工序管理这个实践，我也跟很多客户说过，也在有些客户那里看到了类似的做法，虽然大家名字不一样，但要解决的问题都是类似的，碰到的阻力也都是类似的。

工序管理这个东西又难学又天生反人类，因为工序这种东西就是明确、合乎逻辑、边界清晰、简单重复的任务指令。你想让人按照工序去工作，等于是把知识工作者都变成蓝领工人，小范围内我们可以做到双赢，但是推广开就很容易变成压迫，哪里有压迫哪里就有反抗，其实是不太推得开的。

但是ChatGPT他不是人类，他需要的就是明确、合乎逻辑、边界清晰、简单重复的任务指令。己之砒霜，彼之蜜糖。很多人都有一个错觉，他觉得严谨的、抽象但模式化的描述，也就是类似数学定理、物理定律那样的描述，对于人阅读起来很痛苦，他就会觉得对于ChatGPT阅读起来也很痛苦。但其实越是这样的表达，对ChatGPT越友好。

那么从另一个角度来讲，这是一个好消息，我们有一个喜欢做我们不爱做的事情的合作伙伴，就可以让人类更专注于人类喜欢做的事情，在人类历史上，我们第一次得到了一个可以让人类不用像机器一样工作的工具，但是可以不代表必然。生产关系的改变总是滞后于生产力的革新，那么在这个将变未变的前夜，努力把不可言说的东西变成可以言说的东西的能力，将是过渡期非常重要的一种能力。

## 我不擅长写这种表达怎么办？

上面我们说到，ChatGPT，尤其是GPT4，推理能力是极为恐怖的。只要你的描述是严丝合缝的。像一个数学定理或者物理定理。最不济像一道数学应用题。那么他就可以自己进行推理。

但是这对我们的写作也是有要求的。这种严丝合缝的表达其实对于绝大多数人都是挺痛苦的。于是很多人会担心，我不擅长这种表达怎么办？难道我要被淘汰吗？其实也不用太担心，因为你可以让他帮你写。

我们知道ChatGPT除了回答问题，他也可以帮你续写。比如我上面的例子里，我写完下面的内容后，我其实是写不下去了：

![app-architecture](https://jtong-pic.obs.cn-north-4.myhuaweicloud.com/chatgpt-coding-show/09-chatgpt-coding-show-s2/01-tasking/S201-01-app-architecture.png)


写的严丝合缝这个事情，对我本人也很挑战。一旦我写的哪里有个笔误，自己找起来也很费劲。虽然他能够帮我们纠正，但是他这个纠正也是时灵时不灵。而且这么严肃的复杂的场景，我们也不能指望他那完全不确定的自我纠正。我们还是要自己写对。所以写到这里，我提了这么一个要求：

![help-me-generate-tasking-template](https://jtong-pic.obs.cn-north-4.myhuaweicloud.com/chatgpt-coding-show/09-chatgpt-coding-show-s2/01-tasking/S201-10-help-me-generate-tasking-template.png)

于是就得到了你们看到上面的任务分解的模版。所以不擅长，也不要怕，今时今日，这个工具，比的更多的是想法。
